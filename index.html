<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>Pondok Pesantren App</title>
    <style>
        /* CSS Dasar */
        body { font-family: sans-serif; margin: 0; padding: 20px; background: #f4f4f9; }
        .nav-menu { display: flex; gap: 15px; list-style: none; padding: 0; background: #333; color: white; padding: 10px; border-radius: 8px; }
        .nav-menu li { cursor: pointer; padding: 5px 10px; }
        .nav-menu li.active { background: #555; border-radius: 4px; font-weight: bold; }
        
        .container { display: none; padding: 20px; background: white; border-radius: 8px; margin-top: 10px; }
        .container.active { display: block; }
        
        .task-card { border: 1px solid #ddd; padding: 10px; margin-bottom: 10px; border-radius: 5px; }
        .progress-bar { height: 10px; background: #eee; border-radius: 5px; overflow: hidden; }
        .progress-fill { height: 100%; background: green; }
    </style>
</head>
<body>

    <ul class="nav-menu">
        <li id="m-home" onclick="show('home')" class="active">Home</li>
        <li id="m-job" onclick="show('job')">My Job</li>
        <li id="m-dash" onclick="show('dash')">Dashboard</li>
        <li id="m-stats" onclick="show('stats')">Statistik</li>
    </ul>

    <div id="home" class="container active">
        <h1>Halo, Nathania Evelyn!</h1>
        <p>Sistem Reminder App by Nathania Evelyn</p>
        <h2 id="clock">00:00:00</h2>
        <hr>
        <h3>Pengumuman</h3>
        <input type="text" id="pengumuman" placeholder="Tulis pengumuman...">
        <button onclick="addPengumuman()">+</button>
        <h3>Catatan Hari Ini</h3>
        <textarea id="notes" style="width: 100%; height: 100px;"></textarea>
    </div>

    <div id="job" class="container">
        <h2>Tambah Kegiatan Baru</h2>
        <input type="text" id="taskName" placeholder="Nama Tugas">
        <input type="datetime-local" id="deadline">
        <button onclick="saveTask()">SIMPAN PENGINGAT ✨</button>
    </div>

    <div id="dash" class="container">
        <h2>Dashboard Progress</h2>
        <div id="task-list"></div>
    </div>

    <div id="stats" class="container">
        <h2>Statistik Progres Tugas</h2>
        <table border="1" style="width: 100%; text-align: left;">
            <tr><th>Status</th><th>Jumlah</th></tr>
            <tr><td>Selesai</td><td id="stat-done">0</td></tr>
            <tr><td>Belum Selesai</td><td id="stat-todo">0</td></tr>
        </table>
    </div>

    <script>
        let tasks = JSON.parse(localStorage.getItem('tasks')) || [];

        function show(page) {
            document.querySelectorAll('.container').forEach(c => c.classList.remove('active'));
            document.querySelectorAll('.nav-menu li').forEach(l => l.classList.remove('active'));
            document.getElementById(page).classList.add('active');
            document.getElementById('m-' + page).classList.add('active');
            if(page === 'dash') renderDashboard();
            if(page === 'stats') renderStats();
        }

        // Jam Digital
        function updateClock() {
            document.getElementById('clock').innerText = new Date().toLocaleTimeString();
        }
        setInterval(updateClock, 1000);

        function saveTask() {
            const name = document.getElementById('taskName').value;
            const deadline = document.getElementById('deadline').value;
            if(!name || !deadline) return alert("Isi semua data!");
            tasks.push({ name, deadline, status: 'Belum', reason: '' });
            localStorage.setItem('tasks', JSON.stringify(tasks));
            alert("Tugas Disimpan!");
        }

        function renderDashboard() {
            const list = document.getElementById('task-list');
            list.innerHTML = '';
            tasks.forEach((task, index) => {
                const isLate = new Date(task.deadline) < new Date() && task.status !== 'Selesai';
                list.innerHTML += `
                    <div class="task-card">
                        <p><strong>${task.name}</strong></p>
                        <p>Deadline: ${task.deadline}</p>
                        ${task.status === 'Belum' ? `<button onclick="finishTask(${index})">Tandai Selesai</button>` : '<span>Selesai ✅</span>'}
                        ${isLate ? `<input type="text" placeholder="Kenapa molor?" onchange="saveReason(${index}, this.value)" value="${task.reason}">` : ''}
                    </div>
                `;
            });
        }

        function finishTask(index) {
            tasks[index].status = 'Selesai';
            localStorage.setItem('tasks', JSON.stringify(tasks));
            renderDashboard();
        }

        function saveReason(index, val) {
            tasks[index].reason = val;
            localStorage.setItem('tasks', JSON.stringify(tasks));
        }

        function renderStats() {
            const done = tasks.filter(t => t.status === 'Selesai').length;
            const todo = tasks.length - done;
            document.getElementById('stat-done').innerText = done;
            document.getElementById('stat-todo').innerText = todo;
        }
    </script>
</body>
</html>
